@startuml

'5) When the FS is ON and the QS is ON,
'if DS is turned ON, it indicates intense traffic over the ramp.
'In this scenario, two cars must cross the TL before it turns RED.
'Then, set TL to GREEN. After DS is OFF, ON and OFF (two cars),
'turn TL to RED.

title "Sequence diagram for requirement 5"

control RMController as RMC
entity FreewaySensor as FS
entity EndOfQueueSensor as QS
entity DemandSensor as DS
entity RampTrafficLight as RTL
entity PassageSensor as PS

note left of RMC: Preconditions:\n\t FreewaySensor turned ON\n\t EndOfQueueSensor turned ON\n\t DemandSensor is ON\n\t RampTrafficLight is RED\n\t PassageSensor is turned OFF

'below commented lines not explicitly needed because they are part of the preconditions
'FS -> RMC: on
'QS -> RMC: on
'DS -> RMC: on

note over RMC: Preconditions are met
RMC -> RTL: Tell the RTL to turn GREEN

note over DS: First car leaves the sensor Demand Sensor area
DS -> RMC: Notify RMC that the sensor turned OFF

note over PS: First car enters the Passage Sensor area
PS -> RMC: Notify RMC that the sensor turned ON
note over PS: First car leaves the Passage Sensor area
PS -> RMC: Notify RMC that the sensor turned OFF

note over DS: Second car enters the Demand Sensor area
DS -> RMC: Notify RMC that the sensor turned ON
note over DS: Second car leaves the Demand Sensor area
DS -> RMC: Notify RMC that the sensor turned OFF

RMC -> RTL: Tell the RTL that it has to turn the right RED

note left of RMC: Postconditions:\n\t PassageSensor turned ON \n\t and then PassageSensor \n\t\t turned OFF\n\t

@enduml